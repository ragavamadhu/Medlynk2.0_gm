webpackJsonp([7],{oD7S:function(l,n,u){"use strict";function t(l){return i._28(0,[(l()(),i._7(0,null,null,33,"tr",[],[[8,"className",0]],null,null,null,null)),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,1,"td",[],null,null,null,null,null)),(l()(),i._27(null,["",""])),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,1,"td",[["style","cursor: pointer;padding:0% 1% 0% 1%"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.navToGauge(l.context.index)&&t),t},null,null)),(l()(),i._27(null,["",""])),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,1,"td",[],null,null,null,null,null)),(l()(),i._27(null,["",""])),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,1,"td",[],null,null,null,null,null)),(l()(),i._27(null,["",""])),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,3,"td",[],[[4,"color",null]],null,null,null,null)),(l()(),i._27(null,["",""])),(l()(),i._7(0,null,null,0,"br",[],null,null,null,null,null)),(l()(),i._27(null,["",""])),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,13,"td",[],null,null,null,null,null)),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,2,"div",[["class","col-xs-4"],["style","text-align:right"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.edit(l.context.index)&&t),t},null,null)),(l()(),i._7(0,null,null,1,"a",[],null,null,null,null,null)),(l()(),i._7(0,null,null,0,"img",[["alt","edit"],["style","min-width:20px"],["width","40%"]],[[8,"src",4]],null,null,null,null)),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,2,"div",[["class","col-xs-4"],["style","text-align:right"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.deletefromtable(l.context.index)&&t),t},null,null)),(l()(),i._7(0,null,null,1,"a",[],null,null,null,null,null)),(l()(),i._7(0,null,null,0,"img",[["alt","delete"],["style","min-width:20px"],["width","40%"]],[[8,"src",4]],null,null,null,null)),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,2,"div",[["class","col-xs-4"],["style","text-align:left"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.openModal(l.context.index)&&t),t},null,null)),(l()(),i._7(0,null,null,1,"a",[],null,null,null,null,null)),(l()(),i._7(0,null,null,0,"img",[["alt","Settings"],["style","min-width:20px"],["width","80%"]],[[8,"src",4]],null,null,null,null)),(l()(),i._27(null,["\n    "])),(l()(),i._27(null,["\n  "]))],null,function(l,n){var u=n.component;l(n,0,0,u.tablerow),l(n,3,0,n.context.$implicit.customer_name),l(n,6,0,n.context.$implicit.device_id),l(n,9,0,n.context.$implicit.address),l(n,12,0,n.context.$implicit.key_location),l(n,14,0,n.context.$implicit.color),l(n,15,0,n.context.$implicit.device_status),l(n,17,0,n.context.$implicit.display_date),l(n,23,0,i._10(1,"",u.editimg,"")),l(n,27,0,i._10(1,"",u.delete,"")),l(n,31,0,i._10(1,"",u.setting,""))})}function e(l){return i._28(0,[(l()(),i._27(null,["\n"])),(l()(),i._7(0,null,null,48,"div",[["class","container"]],null,null,null,null,null)),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(l()(),i._27(null,["\n        "])),(l()(),i._7(0,null,null,3,"div",[["class","col-xs-9 col-xs-offset-1 text-right"]],null,null,null,null,null)),(l()(),i._7(0,null,null,2,"h1",[],null,null,null,null,null)),(l()(),i._7(0,null,null,1,"b",[],null,null,null,null,null)),(l()(),i._27(null,["Device Management"])),(l()(),i._27(null,["  \n        "])),(l()(),i._7(0,null,null,6,"div",[["class","col-xs-2 text-right"]],null,null,null,null,null)),(l()(),i._7(0,null,null,5,"button",[["class","btn btn-primary "],["style","background-color:green;font-size:1.5em"]],null,null,null,null,null)),(l()(),i._7(0,null,null,4,"span",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==i._21(l,13).onClick()&&t),t},null,null)),i._5(16384,null,0,a.m,[a.l,a.a,[8,null],i.E,i.k],{routerLink:[0,"routerLink"]},null),i._22(1),(l()(),i._7(0,null,null,1,"b",[],null,null,null,null,null)),(l()(),i._27(null,["ADD"])),(l()(),i._27(null,["\n    "])),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,29,"div",[["class","table-responsive tableprop"]],null,null,null,null,null)),(l()(),i._27(null,["\n          \n"])),(l()(),i._7(0,null,null,26,"table",[["border","1"],["style","width:100%"]],null,null,null,null,null)),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,24,"tbody",[],null,null,null,null,null)),(l()(),i._7(0,null,null,19,"tr",[],null,null,null,null,null)),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,1,"th",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),i._27(null,["Customer Name"])),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,1,"th",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),i._27(null,["Device Id"])),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,1,"th",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),i._27(null,["Address"])),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,1,"th",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),i._27(null,["Key Location"])),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,1,"th",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),i._27(null,["Device Status"])),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,1,"th",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),i._27(null,["Actions"])),(l()(),i._27(null,["\n  "])),(l()(),i._27(null,["\n  "])),(l()(),i._1(16777216,null,null,1,null,t)),i._5(802816,null,0,_.i,[i.P,i.M,i.q],{ngForOf:[0,"ngForOf"]},null),(l()(),i._27(null,["\n"])),(l()(),i._27(null,["\n  "])),(l()(),i._27(null,["\n"])),(l()(),i._27(null,["\n\n"])),(l()(),i._7(0,null,null,2,"div",[["class","backdrop"]],null,null,null,null,null)),i._5(278528,null,0,_.m,[i.r,i.k,i.D],{ngStyle:[0,"ngStyle"]},null),i._23({display:0}),(l()(),i._27(null,["\n"])),(l()(),i._7(0,null,null,50,"div",[["class","modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),i._5(278528,null,0,_.m,[i.r,i.k,i.D],{ngStyle:[0,"ngStyle"]},null),i._23({display:0}),(l()(),i._27(null,["\n  "])),(l()(),i._7(0,null,null,45,"div",[["class","modal-dialog"],["role","document"]],null,null,null,null,null)),(l()(),i._27(null,["\n    "])),(l()(),i._7(0,null,null,42,"div",[["class","modal-content"]],null,null,null,null,null)),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),i._27(null,["\n        "])),(l()(),i._7(0,null,null,1,"h3",[["class","modal-title"]],null,null,null,null,null)),(l()(),i._27(null,["Enter Device Config Password"])),(l()(),i._27(null,["\n      "])),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,30,"form",[["name","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var t=!0,e=l.component;return"submit"===n&&(t=!1!==i._21(l,71).onSubmit(u)&&t),"reset"===n&&(t=!1!==i._21(l,71).onReset()&&t),"ngSubmit"===n&&(t=!1!==e.onSubmitModal()&&t),t},null,null)),i._5(16384,null,0,h.u,[],null,null),i._5(16384,null,0,h.m,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i._24(2048,null,h.c,null,[h.m]),i._5(16384,null,0,h.l,[h.c],null,null),(l()(),i._27(null,["            \n          "])),(l()(),i._7(0,null,null,23,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),i._27(null,["\n            "])),(l()(),i._7(0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),i._27(null,["\n            "])),(l()(),i._7(0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),i._7(0,null,null,1,"label",[["for","exampleInputPassword1"]],null,null,null,null,null)),(l()(),i._27(null,["Enter password"])),(l()(),i._27(null,["\n            "])),(l()(),i._7(0,null,null,7,"input",[["class","form-control"],["name","password"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var t=!0,e=l.component;return"input"===n&&(t=!1!==i._21(l,84)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==i._21(l,84).onTouched()&&t),"compositionstart"===n&&(t=!1!==i._21(l,84)._compositionStart()&&t),"compositionend"===n&&(t=!1!==i._21(l,84)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(e.model.I_modalpassword=u)&&t),t},null,null)),i._5(16384,null,0,h.d,[i.E,i.k,[2,h.a]],null,null),i._5(16384,null,0,h.q,[],{required:[0,"required"]},null),i._24(1024,null,h.h,function(l){return[l]},[h.q]),i._24(1024,null,h.i,function(l){return[l]},[h.d]),i._5(671744,[["password",4]],0,h.n,[[2,h.c],[2,h.h],[8,null],[2,h.i]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i._24(2048,null,h.j,null,[h.n]),i._5(16384,null,0,h.k,[h.j],null,null),(l()(),i._27(null,["\n            "])),(l()(),i._27(null,["\n           "])),(l()(),i._7(0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(l()(),i._27(null,["Submit"])),(l()(),i._27(null,["\n           "])),(l()(),i._7(0,null,null,1,"button",[["class","btn btn-primary"],["style","float: right;"],["type","button"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.onCloseHandled()&&t),t},null,null)),(l()(),i._27(null,["Close"])),(l()(),i._27(null,["\n          "])),(l()(),i._27(null,["\n      "])),(l()(),i._27(null,["\n      "])),(l()(),i._7(0,null,null,1,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),i._27(null,["\n      "])),(l()(),i._27(null,["\n    "])),(l()(),i._27(null,["\n  "])),(l()(),i._27(null,["\n"])),(l()(),i._27(null,["\n\n"]))],function(l,n){var u=n.component;l(n,13,0,l(n,14,0,"/addDevice")),l(n,46,0,u.results),l(n,52,0,l(n,53,0,u.display)),l(n,56,0,l(n,57,0,u.display)),l(n,85,0,""),l(n,88,0,"password",u.model.I_modalpassword)},function(l,n){l(n,69,0,i._21(n,73).ngClassUntouched,i._21(n,73).ngClassTouched,i._21(n,73).ngClassPristine,i._21(n,73).ngClassDirty,i._21(n,73).ngClassValid,i._21(n,73).ngClassInvalid,i._21(n,73).ngClassPending),l(n,83,0,i._21(n,85).required?"":null,i._21(n,90).ngClassUntouched,i._21(n,90).ngClassTouched,i._21(n,90).ngClassPristine,i._21(n,90).ngClassDirty,i._21(n,90).ngClassValid,i._21(n,90).ngClassInvalid,i._21(n,90).ngClassPending)})}function o(l){return i._28(0,[(l()(),i._7(0,null,null,1,"ng-component",[],null,null,null,e,b)),i._5(114688,null,0,p,[v.a,a.l,d.c,c.e],null,null)],function(l,n){l(n,1,0)},null)}Object.defineProperty(n,"__esModule",{value:!0});var i=u("/oeL"),s=function(){function l(){}return l}(),r=[".tablerow[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:5rem;margin-left:auto;margin-right:auto;overflow-x:auto;white-space:nowrap}.tableprop[_ngcontent-%COMP%]{border:1px solid #000;height:80%;padding-top:2rem;padding-bottom:2rem;padding-left:1rem;padding-right:1rem}th[_ngcontent-%COMP%]{background-color:#d8e2ed;color:#000;-webkit-text-emphasis:e;text-emphasis:e}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{padding-top:.2em;padding-bottom:.2em;font-size:15px;font-family:Arial,Helvetica,Sans-Serif;text-align:center}th[_ngcontent-%COMP%]{font-size:18px}h1[_ngcontent-%COMP%]{text-align:center;color:#000;font-size:1ems;padding:20px 0 18px 0}button[_ngcontent-%COMP%]{margin:20px 0 20px 0}img[_ngcontent-%COMP%]{cursor:pointer}"],a=u("BkNc"),_=u("qbdv"),d=u("XKz0"),c=u("CPp0"),g=u("5ERs"),m=(u("TbKO"),u("/xq4")),p=function(){function l(l,n,u,t){this.alert=l,this.router=n,this.http=u,this.httpcustom=t,this.tablecontainer="tablecontainer",this.title="Medlsys",this.tablerow="tablerow",this.tableprop="tableprop",this.results=[],this.model={},this.display="none"}return l.prototype.ngOnInit=function(){var l=this;this.editimg=g.a.imagePath+"edit.png",this.delete=g.a.imagePath+"delete.png",this.setting=g.a.imagePath+"settings.png",this.http.post(g.a.apiUrl+"/deviceAdmin",{data:localStorage.getItem("currentUser")}).subscribe(function(n){for(var u,t=new Date,e=0;e<n.length;e++){"undefined"!=n[e].http_post_interval?(u=Number(n[e].http_post_interval),u>=60?u=u:u<60&&u>=30?u*=3:u>0&&u<30&&(u*=5)):(n[e].http_post_interval=0,u=5),u*=1e3,console.log("deviceadmin",u),"undefined"!=n[e].ang2_threshold&&"undefined"!=n[e].ang3_threshold||(n[e].ang2_threshold="DISABLE",n[e].ang3_threshold="DISABLE",n[e].ang2_lower_limit="20000",n[e].ang3_lower_limit="0");var o="",i="",s=new Date(n[e].server_log_time),r={year:"2-digit",month:"2-digit",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0},a=s.toLocaleString("en-IN",r),_=t.getTime()-s.getTime();u>=6e4&&(_-=5e4,console.log("greater than diff",_),console.log("server_log_time",s,s.getTime()),console.log("device_log_time",t,t.getTime())),1==n[e].gas_leak&&null!=n[e].gas_leak||null!=n[e].ang2_threshold&&"ENABLE"==n[e].ang2_threshold&&null!=n[e].ang2_lower_limit&&1e3*Number(n[e].gas_detector)>Number(n[e].ang2_lower_limit)?(o="LEAK",i="red",null!=n[e].log_time&&_>u&&(o="LEAK & GSM",i="red")):1==n[e].low_gas&&null!=n[e].low_gas||null!=n[e].ang3_threshold&&"ENABLE"==n[e].ang3_threshold&&null!=n[e].ang3_lower_limit&&1e3*Number(n[e].gas_level)<Number(n[e].ang3_lower_limit)?(o="GAS",i="red",null!=n[e].log_time&&_>u&&(o="GAS & GSM",i="red")):n[e].power_level<9&&null!=n[e].low_gas?(o="POWER",i="red",null!=n[e].log_time&&_>u&&(o="POWER & GSM",i="red")):null!=n[e].log_time&&_>u?(o="GSM",i="red"):null==n[e].log_time?(o="No Data",i="red",a=""):(o="Updated",i="green"),n[e].color=i,n[e].device_status=o,n[e].display_date=a,l.results.push(n[e])}})},l.prototype.deletefromtable=function(l){confirm("Are you sure you want to delete:"+this.results[l].device_id)&&(this.httpcustom.post("/deletedevices",{data:this.results[l],user_id:localStorage.getItem("currentUser")}).subscribe({error:function(l){return console.error(l)}}),location.reload())},l.prototype.edit=function(l){var n=m.AES.encrypt(JSON.stringify(this.results[l]),(new Date).toLocaleDateString()+"AES128").toString();window.localStorage.setItem("clickedDevice",n),this.router.navigate(["./editDevice"])},l.prototype.openModal=function(l){this.display="block",this.id=l},l.prototype.onSubmitModal=function(){this.model.I_modalpassword==this.results[this.id].config_password?(this.model.I_modalpassword="",this.onCloseHandled(),this.alert.success("Please wait"),this.gotoconfig(this.id)):(this.model.I_modalpassword="",this.onCloseHandled(),this.alert.error("Invalid password"))},l.prototype.onCloseHandled=function(){this.display="none"},l.prototype.gotoconfig=function(l){var n=m.AES.encrypt(JSON.stringify(this.results[l]),(new Date).toLocaleDateString()+"AES128").toString();window.localStorage.setItem("clickedDevice",n),this.router.navigate(["./config"])},l.prototype.navToGauge=function(l){null==this.results[l].log_time?this.alert.error("No data to display"):this.router.navigate(["./gauges/:"+this.results[l].device_id])},l}(),h=u("bm2B"),v=u("yzbA"),f=[r],b=i._4({encapsulation:0,styles:f,data:{}}),y=i._2("ng-component",p,o,{},{},[]);u.d(n,"deviceAdminModuleNgFactory",function(){return w});var w=i._3(s,[],function(l){return i._18([i._19(512,i.j,i.Z,[[8,[y]],[3,i.j],i.v]),i._19(4608,_.l,_.k,[i.s]),i._19(4608,h.v,h.v,[]),i._19(4608,d.h,d.m,[_.c,i.A,d.k]),i._19(4608,d.n,d.n,[d.h,d.l]),i._19(5120,d.a,function(l){return[l]},[d.n]),i._19(4608,d.j,d.j,[]),i._19(6144,d.i,null,[d.j]),i._19(4608,d.g,d.g,[d.i]),i._19(6144,d.b,null,[d.g]),i._19(5120,d.f,d.o,[d.b,[2,d.a]]),i._19(4608,d.c,d.c,[d.f]),i._19(512,a.o,a.o,[[2,a.t],[2,a.l]]),i._19(512,_.b,_.b,[]),i._19(512,h.t,h.t,[]),i._19(512,h.e,h.e,[]),i._19(512,d.e,d.e,[]),i._19(512,d.d,d.d,[]),i._19(512,s,s,[]),i._19(256,d.k,"XSRF-TOKEN",[]),i._19(256,d.l,"X-XSRF-TOKEN",[]),i._19(1024,a.j,function(){return[[{path:"",component:p}]]},[])])})}});